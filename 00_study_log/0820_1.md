## Index Lifecycle Management

- ILM은 인덱스의 데이터 수명주기를 관리하는 기능이다.
  - 데이터의 수명주기를 관리함으로써 데이터의 저장 공간을 효율적으로 관리할 수 있다.

**Hot**
**Warm**
**Cold**

- **Hot**: 최근 데이터가 저장되는 곳
- **Warm**: Hot 데이터가 일정 기간이 지나면 Warm으로 이동
- **Cold**: Warm 데이터가 일정 기간이 지나면 Cold로 이동

- **Delete**: Cold 데이터가 일정 기간이 지나면 삭제

- **Index Lifecycle Policy**
  - ILM을 적용할 인덱스를 정의하는 정책
  - 정책은 **Hot**, **Warm**, **Cold**, **Delete** 단계를 정의한다.
  - 정책은 **Index Lifecycle Management** API를 통해 생성한다.

## **데이터스트림**

- 내부적으로 여러 개의 인덱스로 구성되어 있어 검색을 수행할 때는
  - 해당 데이터 스트림에 포함된 모든 인덱스를 대상으로 검색을 수행하고,
  - 문서를 추가 색인할 때는 가장 최근에 생성된 단일 인덱스에 새 문서가 추가된다.
- 데이터스트림에는 \_create 라는 API로만 값을 넣을 수 있다.
- 롤오버 시에는 최근 생성된 인덱스의 이름 끝 숫자를 하나 올린 새 인덱스가 생성.
  - 데이터 스트림은 마치 여러 인덱스를 묶고 is_write_true 인덱스를 하나 둔 alias와 유사하게 동작.
- 이름 패턴이 고정이고, 롤오버 시 명시적인 새 인덱스 이름 지정이 불가능하다.
  - 패턴은 .ds-<데이터 스트림 이름>-<yyyy.MM.dd>-<00000n>입니다.

**데이터스트림과 alias의 차이**

- 반드시 인덱스 템플릿과 연계해서 생성
- 문서 추가는 가능하지만 업데이트 작업은 불가
- 반드시 @timestamp 필드가 포함된 문서만을 취급

**데이터스트림의 장점**

- 데이터스트림은 데이터를 더 빠르게 검색/색인할 수 있도록 도와준다.

## **인덱스 템플릿**

- 인덱스 템플릿은 인덱스가 생성될 때 적용할 설정을 미리 정의해 놓은 것이다.
- 인덱스 템플릿을 사용하면 인덱스가 생성될 때마다 설정을 반복해서 지정할 필요가 없다.
- 인덱스 템플릿은 인덱스가 생성될 때 적용할 매핑, 설정, 에일리어스, 인덱스 라이프사이클 관리 정책 등을 미리 정의해 놓은 것이다.
